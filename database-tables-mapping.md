# Schema de Base de Donn√©es - Synkrone Backend

Ce document recense toutes les tables et enums utilis√©s dans le backend de la plateforme Synkrone, avec leurs attributs d√©taill√©s. Ce mapping servira √† la r√©alisation du diagramme de classe.

## üìä R√©sum√©

- **Tables utilis√©es : 20 tables principales**
- **Types √©num√©r√©s : 17 enums**

---

## üéØ **Types √ânum√©r√©s (ENUMs)**

### 1. **availability_enum**
- `'available'` : Disponible pour de nouveaux projets
- `'busy'` : Occup√© sur des projets en cours
- `'unavailable'` : Indisponible temporairement

### 2. **company_size_enum**
- `'micro'` : Tr√®s petite entreprise (1-9 employ√©s)
- `'small'` : Petite entreprise (10-49 employ√©s)
- `'medium'` : Entreprise moyenne (50-249 employ√©s)
- `'large'` : Grande entreprise (250-999 employ√©s)
- `'very_large'` : Tr√®s grande entreprise (1000+ employ√©s)

### 3. **admin_level_enum**
- `'super_admin'` : Administrateur avec tous les droits
- `'moderateur'` : Mod√©rateur avec droits limit√©s
- `'support'` : Support client

### 4. **otp_type_enum**
- `'email_verification'` : V√©rification d'email
- `'password_reset'` : R√©initialisation de mot de passe

### 5. **experience_level_enum**
- `'beginner'` : D√©butant (0-2 ans)
- `'intermediate'` : Interm√©diaire (2-5 ans)
- `'expert'` : Expert (5+ ans)

### 6. **message_type_enum**
- `'text'` : Message texte classique
- `'media'` : Message avec m√©dia (image, fichier)
- `'system'` : Message syst√®me automatique
- `'payment'` : Message li√© aux paiements
- `'contract'` : Message li√© aux contrats
- `'deliverable'` : Message li√© aux livrables

### 7. **type_work_enum**
- `'remote'` : Travail √† distance
- `'hybride'` : Travail hybride
- `'presentiel'` : Travail sur site

### 8. **project_status_enum**
- `'draft'` : Brouillon
- `'published'` : Publi√©
- `'is_pending'` : En attente

### 9. **application_status_enum**
- `'submitted'` : Soumise
- `'under_review'` : En cours de r√©vision
- `'accepted'` : Accept√©e
- `'rejected'` : Rejet√©e
- `'withdrawn'` : Retir√©e

### 10. **contract_status_enum**
- `'draft'` : Brouillon
- `'active'` : Actif
- `'pending'` : En attente
- `'completed'` : Termin√©
- `'cancelled'` : Annul√©
- `'suspended'` : Suspendu

### 11. **payment_mode_enum**
- `'fixed_price'` : Prix fixe
- `'daily_rate'` : Tarif journalier (TJM)
- `'by_milestone'` : Par jalons

### 12. **deliverable_status_enum**
- `'planned'` : Planifi√©
- `'in_progress'` : En cours
- `'submitted'` : Soumis
- `'validated'` : Valid√©
- `'rejected'` : Rejet√©

### 13. **notification_type_enum**
- `'project'` : Notification de projet
- `'application'` : Notification de candidature
- `'payment'` : Notification de paiement
- `'message'` : Notification de message
- `'system'` : Notification syst√®me

### 14. **invitation_status_enum**
- `'sent'` : Envoy√©e
- `'viewed'` : Vue
- `'accepted'` : Accept√©e
- `'declined'` : D√©clin√©e
- `'expired'` : Expir√©e

### 15. **type_media_enum**
- `'pdf'` : Fichier PDF
- `'image'` : Image
- `'doc'` : Document Word
- `'zip'` : Archive ZIP
- `'other'` : Autre type

### 16. **user_type_enum**
- `'freelance'` : Utilisateur freelance
- `'company'` : Utilisateur entreprise

### 17. **work_day_status_enum**
- `'draft'` : Brouillon
- `'submitted'` : Soumis
- `'validated'` : Valid√©
- `'rejected'` : Rejet√©

---

## üèóÔ∏è Tables D√©taill√©es par Domaine

### üë§ **Utilisateurs et Authentification**

#### 1. **freelances**
- **Description** : Profils des freelances inscrits sur la plateforme
- **Features utilis√©es** : `freelance`, `auth`, `applications`, `contracts`

**Attributs :**
- `id` : UUID (PK) - Identifiant unique
- `firstname` : VARCHAR(100) NOT NULL - Pr√©nom
- `lastname` : VARCHAR(100) NOT NULL - Nom de famille  
- `email` : VARCHAR(255) UNIQUE NOT NULL - Email (avec contrainte format)
- `password_hashed` : VARCHAR(255) NOT NULL - Mot de passe hash√©
- `photo_url` : VARCHAR(500) - URL de la photo de profil
- `job_title` : VARCHAR(200) - Titre du poste
- `experience` : experience_level_enum - Niveau d'exp√©rience
- `description` : TEXT - Description du profil
- `cover_url` : VARCHAR(500) - URL de l'image de couverture
- `linkedin_url` : VARCHAR(500) - URL du profil LinkedIn
- `tjm` : DECIMAL(10,2) - Tarif journalier moyen (CHECK > 0)
- `availability` : availability_enum DEFAULT 'available' - Disponibilit√©
- `location` : VARCHAR(500) - Localisation
- `is_verified` : BOOLEAN DEFAULT FALSE - Compte v√©rifi√©
- `country` : VARCHAR(100) - Pays
- `city` : VARCHAR(100) - Ville
- `phone` : VARCHAR(20) - T√©l√©phone
- `block_duration` : INTEGER DEFAULT 0 - Dur√©e de blocage (-1 = ind√©fini)
- `is_first_login` : BOOLEAN DEFAULT TRUE - Premier login
- `deleted_at` : TIMESTAMP - Date de suppression (soft delete)
- `blocked_at` : TIMESTAMP - Date de blocage
- `created_at` : TIMESTAMP DEFAULT CURRENT_TIMESTAMP - Date de cr√©ation
- `updated_at` : TIMESTAMP - Date de mise √† jour

**Relations** : 1-N avec `applications`, `contracts`, `freelance_skills`, `conversations`

#### 2. **companies**
- **Description** : Profils des entreprises inscrites sur la plateforme
- **Features utilis√©es** : `company`, `auth`, `projects`, `contracts`

**Attributs :**
- `id` : UUID (PK) - Identifiant unique
- `company_name` : VARCHAR(200) - Nom de l'entreprise
- `company_email` : VARCHAR(255) UNIQUE NOT NULL - Email de l'entreprise
- `password_hashed` : VARCHAR(255) NOT NULL - Mot de passe hash√©
- `logo_url` : VARCHAR(500) - URL du logo
- `company_description` : TEXT - Description de l'entreprise
- `industry` : VARCHAR(100) - Secteur d'activit√©
- `website_url` : VARCHAR(500) - Site web
- `address` : VARCHAR(500) - Adresse
- `company_size` : company_size_enum - Taille de l'entreprise
- `certification_doc_url` : VARCHAR(500) - Document de certification
- `is_certified` : BOOLEAN DEFAULT FALSE - Entreprise certifi√©e
- `is_verified` : BOOLEAN DEFAULT FALSE - Compte v√©rifi√©
- `block_duration` : INTEGER DEFAULT 0 - Dur√©e de blocage
- `country` : VARCHAR(100) - Pays
- `city` : VARCHAR(100) - Ville
- `company_phone` : VARCHAR(20) - T√©l√©phone
- `is_first_login` : BOOLEAN DEFAULT TRUE - Premier login
- `deleted_at` : TIMESTAMP - Date de suppression
- `blocked_at` : TIMESTAMP - Date de blocage
- `created_at` : TIMESTAMP DEFAULT CURRENT_TIMESTAMP - Date de cr√©ation
- `updated_at` : TIMESTAMP - Date de mise √† jour

**Relations** : 1-N avec `projects`, `contracts`, `conversations`

#### 3. **admins**
- **Description** : Comptes administrateurs de la plateforme
- **Features utilis√©es** : `admin`, `auth-admin`

**Attributs :**
- `id` : UUID (PK) - Identifiant unique
- `username` : VARCHAR(100) UNIQUE NOT NULL - Nom d'utilisateur
- `email` : VARCHAR(255) UNIQUE - Email
- `password_hashed` : VARCHAR(255) NOT NULL - Mot de passe hash√©
- `level` : admin_level_enum NOT NULL - Niveau d'administration
- `created_at` : TIMESTAMP DEFAULT CURRENT_TIMESTAMP - Date de cr√©ation

**Relations** : 1-N avec `litigations`, `reports`

### üîê **S√©curit√© et V√©rification**

#### 4. **otps**
- **Description** : Codes de v√©rification temporaires (email, reset password)
- **Features utilis√©es** : `auth`, `otp`

**Attributs :**
- `id` : UUID (PK) - Identifiant unique
- `email` : VARCHAR(255) NOT NULL - Email destinataire
- `code` : VARCHAR(6) NOT NULL - Code OTP (6 chiffres)
- `type` : otp_type_enum - Type de v√©rification
- `expires_at` : TIMESTAMP NOT NULL - Date d'expiration
- `attempts` : INTEGER DEFAULT 0 - Nombre de tentatives (CHECK >= 0)
- `created_at` : TIMESTAMP DEFAULT CURRENT_TIMESTAMP - Date de cr√©ation
- `used_at` : TIMESTAMP - Date d'utilisation

**Relations** : Aucune (table autonome)

### üéØ **Comp√©tences et Cat√©gories**

#### 5. **category_skills**
- **Description** : Cat√©gories de comp√©tences (D√©veloppement, Design, etc.)
- **Features utilis√©es** : `category-skill`, `skills`

**Attributs :**
- `id` : UUID (PK) - Identifiant unique
- `name` : VARCHAR(100) UNIQUE NOT NULL - Nom de la cat√©gorie
- `slug` : VARCHAR(100) UNIQUE NOT NULL - Slug URL-friendly
- `description` : TEXT - Description de la cat√©gorie
- `created_at` : TIMESTAMP DEFAULT CURRENT_TIMESTAMP - Date de cr√©ation
- `updated_at` : TIMESTAMP - Date de mise √† jour

**Relations** : 1-N avec `skills`

#### 6. **skills**
- **Description** : Comp√©tences individuelles associ√©es aux cat√©gories
- **Features utilis√©es** : `skills`, `freelance-skills`, `project-skills`

**Attributs :**
- `id` : UUID (PK) - Identifiant unique
- `name` : VARCHAR(100) NOT NULL - Nom de la comp√©tence
- `description` : TEXT - Description de la comp√©tence
- `category_id` : UUID (FK) ‚Üí category_skills(id) - Cat√©gorie parente
- `created_at` : TIMESTAMP DEFAULT CURRENT_TIMESTAMP - Date de cr√©ation
- `updated_at` : TIMESTAMP - Date de mise √† jour

**Relations** : N-N avec `freelances` via `freelance_skills`, N-N avec `projects` via `project_skills`

#### 7. **freelance_skills**
- **Description** : Association freelances ‚Üî comp√©tences avec niveau
- **Features utilis√©es** : `freelance-skills`

**Attributs :**
- `freelance_id` : UUID (PK, FK) ‚Üí freelances(id) - Freelance
- `skill_id` : UUID (PK, FK) ‚Üí skills(id) - Comp√©tence
- `level` : VARCHAR(50) - Niveau de comp√©tence (optionnel)
- `created_at` : TIMESTAMP DEFAULT CURRENT_TIMESTAMP - Date de cr√©ation

**Relations** : Table de liaison N-N

### üíº **Projets et Applications**

#### 8. **project_categories**
- **Description** : Cat√©gories de projets (Web, Mobile, etc.)
- **Features utilis√©es** : `project-categories`, `projects`

**Attributs :**
- `id` : UUID (PK) - Identifiant unique
- `name` : VARCHAR(100) UNIQUE NOT NULL - Nom de la cat√©gorie
- `description` : TEXT - Description de la cat√©gorie
- `slug` : VARCHAR(100) UNIQUE NOT NULL - Slug URL-friendly
- `created_at` : TIMESTAMP DEFAULT CURRENT_TIMESTAMP - Date de cr√©ation
- `updated_at` : TIMESTAMP - Date de mise √† jour

**Relations** : 1-N avec `projects`

#### 9. **projects**
- **Description** : Projets publi√©s par les entreprises
- **Features utilis√©es** : `projects`, `applications`, `contracts`

**Attributs :**
- `id` : UUID (PK) - Identifiant unique
- `company_id` : UUID (FK) ‚Üí companies(id) - Entreprise propri√©taire
- `category_id` : UUID (FK) ‚Üí project_categories(id) - Cat√©gorie du projet
- `title` : VARCHAR(300) NOT NULL - Titre du projet
- `description` : TEXT NOT NULL - Description d√©taill√©e
- `budget_min` : DECIMAL(12,2) - Budget minimum
- `budget_max` : DECIMAL(12,2) - Budget maximum
- `deadline` : DATE - Date limite
- `status` : project_status_enum DEFAULT 'draft' - Statut du projet
- `type_work` : type_work_enum - Type de travail
- `estimated_days` : INTEGER - Nombre de jours estim√©s
- `published_at` : TIMESTAMP - Date de publication
- `deleted_at` : TIMESTAMP - Date de suppression (soft delete)
- `created_at` : TIMESTAMP DEFAULT CURRENT_TIMESTAMP - Date de cr√©ation
- `updated_at` : TIMESTAMP - Date de mise √† jour

**Relations** : 1-N avec `applications`, `project_skills`, `contracts`

#### 10. **project_skills**
- **Description** : Comp√©tences requises pour chaque projet
- **Features utilis√©es** : `project-skills`

**Attributs :**
- `project_id` : UUID (PK, FK) ‚Üí projects(id) - Projet
- `skill_id` : UUID (PK, FK) ‚Üí skills(id) - Comp√©tence requise
- `is_required` : BOOLEAN DEFAULT TRUE - Comp√©tence obligatoire
- `created_at` : TIMESTAMP DEFAULT CURRENT_TIMESTAMP - Date de cr√©ation

**Relations** : Table de liaison N-N

#### 11. **applications**
- **Description** : Candidatures des freelances aux projets
- **Features utilis√©es** : `applications`

**Attributs :**
- `id` : UUID (PK) - Identifiant unique
- `freelance_id` : UUID (FK) ‚Üí freelances(id) - Freelance candidat
- `project_id` : UUID (FK) ‚Üí projects(id) - Projet cibl√©
- `cover_letter` : TEXT - Lettre de motivation
- `proposed_price` : DECIMAL(12,2) - Prix propos√©
- `estimated_days` : INTEGER - Dur√©e estim√©e
- `status` : application_status_enum DEFAULT 'submitted' - Statut
- `applied_at` : TIMESTAMP DEFAULT CURRENT_TIMESTAMP - Date de candidature
- `reviewed_at` : TIMESTAMP - Date de r√©vision
- `created_at` : TIMESTAMP DEFAULT CURRENT_TIMESTAMP - Date de cr√©ation
- `updated_at` : TIMESTAMP - Date de mise √† jour

**Relations** : 1-1 avec `contracts` (potentiel), N-1 vers `projects` et `freelances`

### üìã **Contrats et Livrables**

#### 12. **contracts**
- **Description** : Contrats liant freelances et entreprises pour un projet
- **Features utilis√©es** : `contracts`, `deliverables`

**Attributs :**
- `id` : UUID (PK) - Identifiant unique
- `project_id` : UUID (FK) ‚Üí projects(id) - Projet concern√©
- `freelance_id` : UUID (FK) ‚Üí freelances(id) - Freelance
- `company_id` : UUID (FK) ‚Üí companies(id) - Entreprise
- `application_id` : UUID (FK) ‚Üí applications(id) - Candidature accept√©e
- `title` : VARCHAR(300) NOT NULL - Titre du contrat
- `description` : TEXT - Description des termes
- `start_date` : DATE NOT NULL - Date de d√©but
- `end_date` : DATE - Date de fin pr√©vue
- `status` : contract_status_enum DEFAULT 'draft' - Statut du contrat
- `payment_mode` : payment_mode_enum NOT NULL - Mode de paiement
- `total_amount` : DECIMAL(12,2) - Montant total
- `tjm` : DECIMAL(10,2) - Tarif journalier (si applicable)
- `estimated_days` : INTEGER - Nombre de jours estim√©s
- `terms_conditions` : TEXT - Conditions g√©n√©rales
- `signed_freelance_at` : TIMESTAMP - Date signature freelance
- `signed_company_at` : TIMESTAMP - Date signature entreprise
- `created_at` : TIMESTAMP DEFAULT CURRENT_TIMESTAMP - Date de cr√©ation
- `updated_at` : TIMESTAMP - Date de mise √† jour

**Relations** : 1-N avec `deliverables`, `evaluations`, `invoices`, `payments`, `litigations`

#### 13. **deliverables**
- **Description** : Livrables attendus dans le cadre d'un contrat
- **Features utilis√©es** : `deliverables`, `media`

**Attributs :**
- `id` : UUID (PK) - Identifiant unique
- `contract_id` : UUID (FK) ‚Üí contracts(id) - Contrat parent
- `title` : VARCHAR(200) NOT NULL - Titre du livrable
- `description` : TEXT - Description d√©taill√©e
- `status` : deliverable_status_enum DEFAULT 'planned' - Statut
- `is_milestone` : BOOLEAN DEFAULT FALSE - D√©clenche un paiement si TRUE
- `amount` : DECIMAL(12,2) DEFAULT 0 - Montant du jalon
- `due_date` : DATE - Date d'√©ch√©ance
- `submitted_at` : TIMESTAMP - Date de soumission
- `validated_at` : TIMESTAMP - Date de validation
- `rejection_reason` : TEXT - Raison du rejet
- `created_at` : TIMESTAMP DEFAULT CURRENT_TIMESTAMP - Date de cr√©ation
- `updated_at` : TIMESTAMP - Date de mise √† jour

**Relations** : 1-N avec `deliverable_media`

### üìÅ **M√©dias et Fichiers**

#### 14. **media**
- **Description** : Fichiers m√©dias centralis√©s (images, documents)
- **Features utilis√©es** : `media`, `deliverable_media`, `message_media`

**Attributs :**
- `id` : UUID (PK) - Identifiant unique
- `filename` : VARCHAR(255) NOT NULL - Nom du fichier
- `original_name` : VARCHAR(255) - Nom original du fichier
- `file_path` : VARCHAR(500) NOT NULL - Chemin d'acc√®s au fichier
- `file_url` : VARCHAR(500) - URL publique du fichier
- `mime_type` : VARCHAR(100) - Type MIME
- `file_size` : INTEGER - Taille du fichier en octets
- `type_media` : type_media_enum - Type de m√©dia
- `uploaded_by` : UUID - ID de l'utilisateur qui a upload√©
- `deleted_at` : TIMESTAMP - Date de suppression (soft delete)
- `created_at` : TIMESTAMP DEFAULT CURRENT_TIMESTAMP - Date de cr√©ation
- `updated_at` : TIMESTAMP - Date de mise √† jour

**Relations** : N-N avec `deliverables` via `deliverable_media`, N-N avec `messages` via `message_media`

#### 15. **deliverable_media**
- **Description** : Fichiers associ√©s aux livrables
- **Features utilis√©es** : `deliverable_media`

**Attributs :**
- `deliverable_id` : UUID (PK, FK) ‚Üí deliverables(id) - Livrable
- `media_id` : UUID (PK, FK) ‚Üí media(id) - Fichier m√©dia
- `deleted_at` : TIMESTAMP - Date de suppression (soft delete)
- `created_at` : TIMESTAMP DEFAULT CURRENT_TIMESTAMP - Date de cr√©ation

**Relations** : Table de liaison N-N

#### 16. **message_media**
- **Description** : Fichiers attach√©s aux messages
- **Features utilis√©es** : `message_media`

**Attributs :**
- `message_id` : UUID (PK, FK) ‚Üí messages(id) - Message
- `media_id` : UUID (PK, FK) ‚Üí media(id) - Fichier m√©dia
- `deleted_at` : TIMESTAMP - Date de suppression (soft delete)
- `created_at` : TIMESTAMP DEFAULT CURRENT_TIMESTAMP - Date de cr√©ation

**Relations** : Table de liaison N-N

### üí¨ **Communication**

#### 17. **conversations**
- **Description** : Conversations entre freelances et entreprises
- **Features utilis√©es** : `conversations`, `messages`

**Attributs :**
- `id` : UUID (PK) - Identifiant unique
- `freelance_id` : UUID (FK) ‚Üí freelances(id) - Freelance participant
- `company_id` : UUID (FK) ‚Üí companies(id) - Entreprise participante
- `application_id` : UUID (FK) ‚Üí applications(id) - Candidature li√©e (optionnel)
- `contract_id` : UUID (FK) ‚Üí contracts(id) - Contrat li√© (optionnel)
- `created_at` : TIMESTAMP DEFAULT CURRENT_TIMESTAMP - Date de cr√©ation
- `updated_at` : TIMESTAMP - Date de mise √† jour

**Contraintes :** UNIQUE (freelance_id, company_id)

**Relations** : 1-N avec `messages`

#### 18. **messages**
- **Description** : Messages √©chang√©s entre utilisateurs
- **Features utilis√©es** : `messages`, `message_media`

**Attributs :**
- `id` : UUID (PK) - Identifiant unique
- `sender_id` : UUID NOT NULL - ID de l'exp√©diteur (freelance ou company)
- `receiver_id` : UUID NOT NULL - ID du destinataire (freelance ou company)
- `content` : TEXT - Contenu du message
- `type_message` : message_type_enum DEFAULT 'text' - Type de message
- `is_read` : BOOLEAN DEFAULT FALSE - Message lu
- `sent_at` : TIMESTAMP DEFAULT CURRENT_TIMESTAMP - Date d'envoi
- `project_id` : UUID (FK) ‚Üí projects(id) - Projet li√© (optionnel)
- `reply_to_message_id` : UUID (FK) ‚Üí messages(id) - Message parent (r√©ponse)
- `conversation_id` : UUID (FK) ‚Üí conversations(id) - Conversation parente
- `created_at` : TIMESTAMP DEFAULT CURRENT_TIMESTAMP - Date de cr√©ation
- `updated_at` : TIMESTAMP - Date de mise √† jour
- `deleted_at` : TIMESTAMP - Date de suppression (soft delete)

**Relations** : 1-N avec `message_media`, r√©cursive avec elle-m√™me (r√©ponses)

### üîî **Notifications**

#### 19. **notifications**
- **Description** : Notifications envoy√©es aux utilisateurs
- **Features utilis√©es** : `notifications`, `user-notifications`

**Attributs :**
- `id` : UUID (PK) - Identifiant unique
- `title` : VARCHAR(200) NOT NULL - Titre de la notification
- `message` : TEXT NOT NULL - Contenu du message
- `type` : notification_type_enum - Type de notification
- `is_global` : BOOLEAN DEFAULT FALSE - Notification globale (tous les utilisateurs)
- `metadata` : JSONB - Donn√©es suppl√©mentaires (JSON)
- `created_at` : TIMESTAMP DEFAULT CURRENT_TIMESTAMP - Date de cr√©ation
- `updated_at` : TIMESTAMP - Date de mise √† jour

**Relations** : 1-N avec `user_notifications`

#### 20. **user_notifications**
- **Description** : Lien entre utilisateurs et notifications (ciblage, statut lu)
- **Features utilis√©es** : `user-notifications`

**Attributs :**
- `id` : UUID (PK) - Identifiant unique
- `user_id` : UUID NOT NULL - ID de l'utilisateur (freelance ou company)
- `notification_id` : UUID (FK) ‚Üí notifications(id) - Notification li√©e
- `is_read` : BOOLEAN DEFAULT FALSE - Notification lue
- `created_at` : TIMESTAMP DEFAULT CURRENT_TIMESTAMP - Date de cr√©ation
- `updated_at` : TIMESTAMP - Date de mise √† jour

**Contraintes :** UNIQUE (user_id, notification_id)

**Relations** : N-1 vers `notifications`

---

## üìä **Tables additionnelles pr√©sentes dans le sch√©ma mais non encore impl√©ment√©es**

Ces tables sont d√©finies dans `database.sql` mais n'ont pas encore de repositories/services associ√©s :

- **evaluations** : √âvaluations post-contrat
- **invoices** : Factures g√©n√©r√©es 
- **payments** : Historique des paiements
- **litigations** : Litiges entre utilisateurs
- **reports** : Signalements d'utilisateurs
- **project_invitations** : Invitations envoy√©es aux freelances (non impl√©ment√©e)
- **work_days** : Jours de travail associ√©s aux livrables (non impl√©ment√©e)

---

## üîó **Diagramme de Relations Principales**

```
                    category_skills
                           ‚Üì (1-N)
freelances ‚Üê--‚Üí freelance_skills ‚Üê--‚Üí skills ‚Üê--‚Üí project_skills ‚Üê--‚Üí projects
    ‚Üì (1-N)                                                               ‚Üë (N-1)
applications ‚Üê------------------------------------------------------------ companies
    ‚Üì (1-1)                                                                 ‚Üë (1-N)
contracts ‚Üê-------------------------------------------------------------‚îò
    ‚Üì (1-N)                                             project_categories
deliverables                                                   ‚Üë (N-1)
    ‚Üì (1-N)                                                     ‚îÇ
deliverable_media ‚Üê--‚Üí media ‚Üê--‚Üí message_media
                        ‚Üë                  ‚Üì (N-1)
                   (centralis√©)       messages ‚Üê-- conversations
                                          ‚Üë              ‚Üì (1-N)
notifications ‚Üê--‚Üí user_notifications      ‚îÇ         freelances
    ‚Üë (1-N)           ‚Üì (N-1)              ‚îÇ              +
    ‚îÇ                 ‚îî‚îÄ‚îÄ user_id ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò         companies
(globales)                                         (utilisateurs)
```

---

---

## üìù **Notes Techniques**

### **Contraintes et Validations**
- **UUID v4** : Toutes les cl√©s primaires
- **Email Format** : Validation regex pour les emails
- **URL Format** : Validation HTTPS pour les URLs
- **Montants** : CHECK constraints pour les valeurs positives
- **Dates** : Contraintes logiques entre dates (ex: `end_date` > `start_date`)

### **Fonctionnalit√©s Avanc√©es**
- **Soft Delete** : `deleted_at` sur `freelances`, `companies`, `projects`, `media`, `messages`
- **Audit Trail** : `created_at` / `updated_at` avec triggers automatiques
- **Row Level Security (RLS)** : Activ√© sur les tables sensibles
- **JSONB Metadata** : Donn√©es flexibles dans `notifications`
- **Contraintes UNIQUE** : √âviter les doublons (conversations, user_notifications)

### **Index de Performance**
- **Recherche** : `email`, `job_title`, `company_name`, `title`
- **Filtrage** : `status`, `availability`, `type`, `is_verified`
- **Relations** : Toutes les cl√©s √©trang√®res index√©es
- **G√©olocalisation** : `country`, `city`
- **Temporalit√©** : `created_at`, `expires_at`, `deadline`

### **Polymorphisme**
- **user_id** dans `user_notifications` et `messages` : r√©f√©rence `freelances` OU `companies`
- **sender_id/receiver_id** dans `messages` : r√©f√©rence `freelances` OU `companies`
- **uploaded_by** dans `media` : r√©f√©rence `freelances` OU `companies`

---

**üìä Statistiques :**
- **20 tables principales** utilis√©es dans le backend
- **17 types √©num√©r√©s** pour la coh√©rence des donn√©es
- **72+ attributs** avec contraintes m√©tier
- **15+ relations cl√©s √©trang√®res** entre tables

**üîÑ Version :** Database Schema v2.0 - Septembre 2025  
**üìÅ Source :** `database.sql` + `database-safe.sql`